{% extends "base.html" %} {% block content %}
<div class="row justify-content-center mt-4">
  <div class="col-12 col-md-10 col-lg-8">
    <div class="card bg-gradient p-4 shadow rounded-3">
      <div class="card-body">
        <h2 class="mb-4 text-center">Algebra Solver</h2>
        <form method="post">
          {{ form.hidden_tag() }}

          <!-- Tool Selection -->
          <div class="mb-3">
            {{ form.tool.label(class="form-label") }} {{
            form.tool(class="form-select", id="tool-select") }}
          </div>

          <!-- Expression Panel -->
          <div id="panel-expression" class="tool-panel">
            {{ form.expression.label(class="form-label") }} {{
            form.expression(class="form-control", placeholder="(x+y)**2 - 3*x")
            }} {{ form.expr_action(class="form-select mt-2") }}
          </div>

          <!-- Equation Panel -->
          <div id="panel-equation" class="tool-panel" style="display: none">
            {{ form.equation.label(class="form-label") }} {{
            form.equation(class="form-control", placeholder="x**2 - 5*x + 6") }}
            {{ form.var(class="form-control mt-2", placeholder="x") }}
          </div>

          <!-- Polynomial Panel -->
          <div id="panel-polynomial" class="tool-panel" style="display: none">
            {{ form.coeffs.label(class="form-label") }} {{
            form.coeffs(class="form-control", placeholder="1, -3, 2") }} {{
            form.poly_action(class="form-select mt-2") }}
          </div>

          <!-- Matrix Panel -->
          <div id="panel-matrix" class="tool-panel" style="display: none">
            {{ form.A.label(class="form-label") }} {{
            form.A(class="form-control", placeholder="1 2; 3 4") }} {{
            form.B.label(class="form-label mt-2") }} {{
            form.B(class="form-control", placeholder="2; 1") }} {{
            form.mat_action(class="form-select mt-2") }}
          </div>

          <!-- Submit -->
          <div class="d-grid mt-3">
            {{ form.submit(class="btn btn-primary btn-lg") }}
          </div>
        </form>

        <!-- Result / Error Alerts -->
        {% if result %}
        <div class="alert alert-success mt-3">
          <strong>Result:</strong> {{ result }}
        </div>
        {% endif %} {% if error %}
        <div class="alert alert-danger mt-3">
          <strong>Error:</strong> {{ error }}
        </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const toolSelect = document.getElementById("tool-select");
    const panels = document.querySelectorAll(".tool-panel");

    function togglePanels() {
      panels.forEach((p) => (p.style.display = "none"));
      const selected = toolSelect.value;
      const panel = document.getElementById("panel-" + selected);
      if (panel) panel.style.display = "block";
    }

    toolSelect.addEventListener("change", togglePanels);
    togglePanels();
  });
</script>
{% endblock %}
